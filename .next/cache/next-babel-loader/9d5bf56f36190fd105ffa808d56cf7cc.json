{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport useSWR from 'swr';\nimport fetch from 'isomorphic-unfetch';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport Board from './Board';\nimport Toggle from '../components/Toggle';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nfunction fetcher(url) {\n  return fetch(url).then(function (r) {\n    return r.json();\n  });\n}\n\nexport default function Index() {\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var token = query.token;\n\n  var _useSWR = useSWR(\"/api/games?token=\".concat(token), fetcher, {\n    refreshInterval: 100\n  }),\n      data = _useSWR.data,\n      error = _useSWR.error; // The following line has optional chaining, added in Next.js v9.1.5,\n  // is the same as `data && data.author`\n\n\n  var boardMap = data === null || data === void 0 ? void 0 : data.boardMap;\n  var loading = !boardMap;\n  if (error) boardMap = 'Failed to fetch game data.';\n\n  var _useState = useState(false),\n      isCodeMaster = _useState[0],\n      setIsCodeMaster = _useState[1];\n\n  var revealCard = function revealCard(x, y) {\n    console.log('revealing: ', x, y);\n    fetch('/api/games', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        token: token,\n        x: x,\n        y: y\n      })\n    });\n  };\n\n  var copyToClipboard = function copyToClipboard() {\n    var el = document.createElement('textarea');\n    el.value = token;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n  };\n\n  return __jsx(\"main\", null, loading && \"Loading...\", boardMap && __jsx(React.Fragment, null, __jsx(Toggle, {\n    text: \"Codemaster\",\n    onToggle: function onToggle() {\n      return setIsCodeMaster(!isCodeMaster);\n    },\n    checked: isCodeMaster\n  }), __jsx(\"div\", {\n    className: \"url-holder\"\n  }, __jsx(\"button\", {\n    className: \"btn btn-blue\",\n    onClick: function onClick() {\n      return copyToClipboard();\n    }\n  }, __jsx(FontAwesomeIcon, {\n    icon: \"fas fa-copy\"\n  }), __jsx(\"div\", {\n    className: \"copy-link\"\n  }, \"Copy Link:\")), __jsx(\"div\", {\n    className: \"url\"\n  }, \"\".concat(token))), __jsx(Board, {\n    boardMap: boardMap,\n    isCodeMaster: isCodeMaster,\n    revealCard: revealCard\n  })), __jsx(\"style\", null, \"\\n        main {\\n          width: 100%;\\n          display: flex;\\n          flex-direction: column;\\n          justify-content: center;\\n        }\\n        .url-holder{\\n          align-self: center;\\n          padding: 5px;\\n          display: flex;\\n          justify-content: center;\\n          padding: 5px;\\n          border: solid 1px lightgray;\\n          border-radius: 4px;\\n          margin-bottom: 10px;\\n        }\\n        .url {\\n          align-self: center;\\n          margin-left: 5px;\\n        }\\n      \"));\n}","map":null,"metadata":{},"sourceType":"module"}