{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport useSWR from 'swr';\nimport fetch from 'isomorphic-unfetch';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport Board from './Board';\nimport Toggle from '../components/Toggle';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nfunction fetcher(url) {\n  return fetch(url).then(r => r.json());\n}\n\nexport default function Index() {\n  const {\n    query\n  } = useRouter();\n  const {\n    token\n  } = query;\n  const {\n    data,\n    error\n  } = useSWR(`/api/games?token=${token}`, fetcher, {\n    refreshInterval: 100\n  }); // The following line has optional chaining, added in Next.js v9.1.5,\n  // is the same as `data && data.author`\n\n  let boardMap = data === null || data === void 0 ? void 0 : data.boardMap;\n  const loading = !boardMap;\n  if (error) boardMap = 'Failed to fetch game data.';\n  const {\n    0: isCodeMaster,\n    1: setIsCodeMaster\n  } = useState(false);\n\n  const revealCard = (x, y) => {\n    console.log('revealing: ', x, y);\n    fetch('/api/games', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        token,\n        x,\n        y\n      })\n    });\n  };\n\n  const copyToClipboard = () => {\n    const el = document.createElement('textarea');\n    el.value = token;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n  };\n\n  return __jsx(\"main\", null, loading && \"Loading...\", boardMap && __jsx(React.Fragment, null, __jsx(Toggle, {\n    text: \"Codemaster\",\n    onToggle: () => setIsCodeMaster(!isCodeMaster),\n    checked: isCodeMaster\n  }), __jsx(\"div\", {\n    className: \"url-holder\"\n  }, __jsx(\"button\", {\n    className: \"btn btn-blue\",\n    onClick: () => copyToClipboard()\n  }, __jsx(FontAwesomeIcon, {\n    icon: \"fas fa-copy\"\n  }), __jsx(\"div\", {\n    className: \"copy-link\"\n  }, \"Copy Link:\")), __jsx(\"div\", {\n    className: \"url\"\n  }, `${token}`)), __jsx(Board, {\n    boardMap: boardMap,\n    isCodeMaster: isCodeMaster,\n    revealCard: revealCard\n  })), __jsx(\"style\", null, `\n        main {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n        }\n        .url-holder{\n          align-self: center;\n          padding: 5px;\n          display: flex;\n          justify-content: center;\n          padding: 5px;\n          border: solid 1px lightgray;\n          border-radius: 4px;\n          margin-bottom: 10px;\n        }\n        .url {\n          align-self: center;\n          margin-left: 5px;\n        }\n      `));\n}","map":null,"metadata":{},"sourceType":"module"}