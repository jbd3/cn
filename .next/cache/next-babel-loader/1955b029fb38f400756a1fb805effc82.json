{"ast":null,"code":"var _jsxFileName = \"/Users/jakedouglas 1/development/nextJs/cn/components/BoardContainer.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport useSWR from 'swr';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport Board from './Board';\nimport Toggle from '../components/Toggle';\n\nfunction fetcher(url) {\n  return fetch(url).then(function (r) {\n    return r.json();\n  });\n}\n\nexport default function Index() {\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var token = query.token;\n\n  var _useSWR = useSWR(\"/api/games?token=\".concat(token), fetcher),\n      data = _useSWR.data,\n      error = _useSWR.error; // The following line has optional chaining, added in Next.js v9.1.5,\n  // is the same as `data && data.author`\n\n\n  var boardMap = data === null || data === void 0 ? void 0 : data.boardMap;\n  var loading = !boardMap;\n  if (error) boardMap = 'Failed to fetch game data.';\n\n  var _useState = useState(false),\n      isCodeMaster = _useState[0],\n      setIsCodeMaster = _useState[1];\n\n  var revealCard = function revealCard(x, y) {\n    console.log('revealing: ', x, y);\n    fetch('/games', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        token: token,\n        x: x,\n        y: y\n      })\n    });\n    boardMap[x][y].isRevealed = true;\n  };\n\n  return __jsx(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, loading && \"Loading...\", boardMap && __jsx(React.Fragment, null, __jsx(Toggle, {\n    text: \"Codemaster\",\n    onToggle: function onToggle() {\n      return setIsCodeMaster(!isCodeMaster);\n    },\n    checked: isCodeMaster,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, \"URL: \", \"\".concat(token)), __jsx(Board, {\n    boardMap: boardMap,\n    isCodeMaster: isCodeMaster,\n    revealCard: revealCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/jakedouglas 1/development/nextJs/cn/components/BoardContainer.js"],"names":["useSWR","useRouter","useState","Board","Toggle","fetcher","url","fetch","then","r","json","Index","query","token","data","error","boardMap","loading","isCodeMaster","setIsCodeMaster","revealCard","x","y","console","log","method","headers","body","JSON","stringify","isRevealed"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,KAAnB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;;AAEA,SAASC,OAAT,CAAiBC,GAAjB,EAAsB;AACpB,SAAOC,KAAK,CAACD,GAAD,CAAL,CAAWE,IAAX,CAAgB,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,GAAjB,CAAP;AACD;;AAED,eAAe,SAASC,KAAT,GAAiB;AAAA,mBACZV,SAAS,EADG;AAAA,MACtBW,KADsB,cACtBA,KADsB;;AAAA,MAEtBC,KAFsB,GAEZD,KAFY,CAEtBC,KAFsB;;AAAA,gBAGNb,MAAM,4BAAqBa,KAArB,GAA8BR,OAA9B,CAHA;AAAA,MAGtBS,IAHsB,WAGtBA,IAHsB;AAAA,MAGhBC,KAHgB,WAGhBA,KAHgB,EAI9B;AACA;;;AACA,MAAIC,QAAQ,GAAGF,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEE,QAArB;AACA,MAAMC,OAAO,GAAG,CAACD,QAAjB;AACA,MAAID,KAAJ,EAAWC,QAAQ,GAAG,4BAAX;;AARmB,kBAUUd,QAAQ,CAAC,KAAD,CAVlB;AAAA,MAUvBgB,YAVuB;AAAA,MAUTC,eAVS;;AAY9B,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,CAAD,EAAIC,CAAJ,EAAU;AAC3BC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,CAA3B,EAA8BC,CAA9B;AACAf,IAAAA,KAAK,CAAC,QAAD,EAAW;AACdkB,MAAAA,MAAM,EAAE,KADM;AAEdC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFK;AAKdC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEhB,QAAAA,KAAK,EAALA,KAAF;AAASQ,QAAAA,CAAC,EAADA,CAAT;AAAYC,QAAAA,CAAC,EAADA;AAAZ,OAAf;AALQ,KAAX,CAAL;AAOAN,IAAAA,QAAQ,CAACK,CAAD,CAAR,CAAYC,CAAZ,EAAeQ,UAAf,GAA4B,IAA5B;AACD,GAVD;;AAYA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGb,OAAO,IAAI,YADd,EAEGD,QAAQ,IAAK,4BACZ,MAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,YAAb;AAA0B,IAAA,QAAQ,EAAE;AAAA,aAAMG,eAAe,CAAC,CAACD,YAAF,CAArB;AAAA,KAApC;AAA0E,IAAA,OAAO,EAAEA,YAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADY,EAEZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAcL,KAAd,EAFY,EAGZ,MAAC,KAAD;AAAO,IAAA,QAAQ,EAAEG,QAAjB;AAA2B,IAAA,YAAY,EAAEE,YAAzC;AAAuD,IAAA,UAAU,EAAEE,UAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHY,CAFhB,CADF;AAUD","sourcesContent":["import useSWR from 'swr';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport Board from './Board';\nimport Toggle from '../components/Toggle'\n\nfunction fetcher(url) {\n  return fetch(url).then(r => r.json());\n}\n\nexport default function Index() {\n  const { query } = useRouter();\n  const { token } = query;\n  const { data, error } = useSWR(`/api/games?token=${token}`, fetcher);\n  // The following line has optional chaining, added in Next.js v9.1.5,\n  // is the same as `data && data.author`\n  let boardMap = data?.boardMap;\n  const loading = !boardMap;\n  if (error) boardMap = 'Failed to fetch game data.';\n\n  const [isCodeMaster, setIsCodeMaster] = useState(false);\n\n  const revealCard = (x, y) => {\n    console.log('revealing: ', x, y);\n    fetch('/games', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ token, x, y }),\n    })\n    boardMap[x][y].isRevealed = true;\n  }\n\n  return (\n    <main>\n      {loading && \"Loading...\"}\n      {boardMap && (<>\n        <Toggle text='Codemaster' onToggle={() => setIsCodeMaster(!isCodeMaster)} checked={isCodeMaster} />\n        <div>URL: {`${token}`}</div>\n        <Board boardMap={boardMap} isCodeMaster={isCodeMaster} revealCard={revealCard} />\n      </>)}\n    </main>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}