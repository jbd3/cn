{"ast":null,"code":"import { MongoClient } from 'mongodb';\nimport nextConnect from 'next-connect';\nconst client = new MongoClient('mongodb+srv://barstool:T0qLffUuHsNiDFaX@cluster0-r3emj.mongodb.net/test?retryWrites=true&w=majority', {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\n\nasync function database(req, res, next) {\n  try {\n    if (!client.isConnected()) await client.connect();\n    req.dbClient = client;\n    req.db = client.db('cs');\n    console.log('Connected to Database');\n    return next();\n  } catch (err) {\n    throw new Error('Error connecting to Database. Error: ', err);\n  }\n}\n\nconst middleware = nextConnect();\nmiddleware.use(database);\nexport default middleware;","map":null,"metadata":{},"sourceType":"module"}