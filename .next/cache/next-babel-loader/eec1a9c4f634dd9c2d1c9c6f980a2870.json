{"ast":null,"code":"var _jsxFileName = \"/Users/jakedouglas 1/development/nextJs/cn/components/BoardContainer.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport useSWR from 'swr';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport Board from './Board';\nimport Toggle from '../components/Toggle';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nfunction fetcher(url) {\n  return fetch(url).then(r => r.json());\n}\n\nexport default function Index() {\n  const {\n    query\n  } = useRouter();\n  const {\n    token\n  } = query;\n  const {\n    data,\n    error\n  } = useSWR(`/api/games?token=${token}`, fetcher, {\n    refreshInterval: 100\n  }); // The following line has optional chaining, added in Next.js v9.1.5,\n  // is the same as `data && data.author`\n\n  let boardMap = data === null || data === void 0 ? void 0 : data.boardMap;\n  const loading = !boardMap;\n  if (error) boardMap = 'Failed to fetch game data.';\n  const {\n    0: isCodeMaster,\n    1: setIsCodeMaster\n  } = useState(false);\n\n  const revealCard = (x, y) => {\n    console.log('revealing: ', x, y);\n    fetch('/api/games', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        token,\n        x,\n        y\n      })\n    });\n  };\n\n  const copyToClipboard = () => {\n    const el = document.createElement('textarea');\n    el.value = token;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n  };\n\n  return __jsx(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, loading && \"Loading...\", boardMap && __jsx(React.Fragment, null, __jsx(Toggle, {\n    text: \"Codemaster\",\n    onToggle: () => setIsCodeMaster(!isCodeMaster),\n    checked: isCodeMaster,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: \"url-holder\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, __jsx(\"button\", {\n    onClick: () => copyToClipboard(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, __jsx(FontAwesomeIcon, {\n    icon: \"fa-copy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), \"Copy to Clipboard\"), __jsx(\"div\", {\n    className: \"url\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, `${token}`)), __jsx(Board, {\n    boardMap: boardMap,\n    isCodeMaster: isCodeMaster,\n    revealCard: revealCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  })), __jsx(\"style\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, `\n        main {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n        }\n        .url-holder{\n          align-self: center;\n          padding: 5px;\n\n        }\n      `));\n}","map":{"version":3,"sources":["/Users/jakedouglas 1/development/nextJs/cn/components/BoardContainer.js"],"names":["useSWR","useRouter","useState","Board","Toggle","FontAwesomeIcon","fetcher","url","fetch","then","r","json","Index","query","token","data","error","refreshInterval","boardMap","loading","isCodeMaster","setIsCodeMaster","revealCard","x","y","console","log","method","headers","body","JSON","stringify","copyToClipboard","el","document","createElement","value","appendChild","select","execCommand","removeChild"],"mappings":"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","sourcesContent":["import useSWR from 'swr';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport Board from './Board';\nimport Toggle from '../components/Toggle'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nfunction fetcher(url) {\n  return fetch(url).then(r => r.json());\n}\n\nexport default function Index() {\n  const { query } = useRouter();\n  const { token } = query;\n  const { data, error } = useSWR(`/api/games?token=${token}`, fetcher, { refreshInterval: 100 });\n  // The following line has optional chaining, added in Next.js v9.1.5,\n  // is the same as `data && data.author`\n  let boardMap = data?.boardMap;\n  const loading = !boardMap;\n  if (error) boardMap = 'Failed to fetch game data.';\n\n  const [isCodeMaster, setIsCodeMaster] = useState(false);\n\n  const revealCard = (x, y) => {\n    console.log('revealing: ', x, y);\n    fetch('/api/games', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ token, x, y }),\n    })\n  }\n\n  const copyToClipboard = () => {\n    const el = document.createElement('textarea');\n    el.value = token;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n  };\n\n  return (\n    <main>\n      {loading && \"Loading...\"}\n      {boardMap && (<>\n        <Toggle text='Codemaster' onToggle={() => setIsCodeMaster(!isCodeMaster)} checked={isCodeMaster} />\n        <div className=\"url-holder\">\n          <button onClick={() => copyToClipboard()}>\n            <FontAwesomeIcon icon=\"fa-copy\" />\n            Copy to Clipboard\n          </button>\n          <div className=\"url\">{`${token}`}</div>\n        </div>\n        <Board boardMap={boardMap} isCodeMaster={isCodeMaster} revealCard={revealCard} />\n      </>)}\n      <style>{`\n        main {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n        }\n        .url-holder{\n          align-self: center;\n          padding: 5px;\n\n        }\n      `}</style>\n    </main>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}